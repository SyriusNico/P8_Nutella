{% extends 'base.html' %}

{% load static %}

{% block title %}Résultat{% endblock %}
{% block header%}
    {% if searched %}
    {% if product %}
	<header>
        <br>
		<div class="container px-4 px-lg-5 h-100">
			<div class="row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center">
				<div class="col-lg-4 col-sm-6 ">
                    <a class="portfolio-box" href="{% url 'detail' product_id=product.id %}" title="Produit">
                    <h2>{{ product.product_name }}</h2><br>
					<img class="img-fluid" src="{{ product.url }}" alt="" />
                    <ul>
                        <li>Nom : {{ product.product_name }}</li>
                        <li>Nutriscore : {{ product.nutrition_grade }}</li>
                    </ul>           
				</div>
			</div>
		</div>
	</header>   
    {% endif %}
    {% endif %}
{% endblock %}
{% block content %}
        <!-- Portfolio-->
        {% if searched %}
            {% if product %}
        <div id="portfolio">
            <div class="container-fluid p-0">
            	<div class="row gx-4 gx-lg-5 justify-content-center">
            		<div class="col-lg-4 text-center">
                        {% if substitutes %}
            			<h2 class="text-black">Vous pouvez remplacer cet aliment par :</h2>
                        {% else%}
                        <h2 class="text-black">Il n'y a pas de substitut pour ce produit.</h2>
                        {% endif %}
            		</div>
                    <br>            		
            	</div>
                {% if substitutes %}
                <div class="row g-0">
                    {% for substitute in substitutes%}
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" href="{% url 'detail' product_id=substitute.id %}" title="Produit">
                            <center>
                            <img class="img-fluid" src="{{ substitute.url }}" alt="..." />
                            <div class="btn btn-primary position-absolute top"><h5>{{substitute.nutrition_grade}}</h5></div>
                            <div class="project-name"><h5>{{ substitute }}</h5></div>
                            </center>
                        </a>
                    </div>
                    {% endfor %}
                {% endif %}
            </div>
            {% else %}
            <header class="masthead">
                <div class="container px-4 px-lg-5 h-100">
                    <div class="row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center">
                        <div class="col-lg-8 align-self-end">
                            <h1 class="text-white font-weight-bold">Il n'a pas de produit correspondant à votre recherche.</h1>
                            <hr class="divider" />
                        </div>
                        <div class="col-lg-8 align-self-baseline">
                            <h2 class="text-white-75 mb-5">Voulez vous réessayer ?</h2>
                        </div>
                        <div class="col-lg-8 align-self-baseline">
                            <form action="{% url 'result' %}" method="POST">
                                {% csrf_token %}
                                <input  type="search" placeholder="Entrer un nom de produit" name="searched">
                                <button class="btn btn-primary btn-xl" type="submit">Chercher</button>
                            </form>
                        </div>
                    </div>
                </div>
            </header>
                {% endif %}
            {% endif %}
{% endblock %}